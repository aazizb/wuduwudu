@using IWSProject.Content
@using IWSProject.Models
@model List<ResultsViewModel>

<script type="text/javascript">
    var sClassId = null;
    var sStart = null;
    var sEnd = null;
    function OnButtonClick(s, e) {
        sClassId = ClassId.GetValue();
        sStart = txtStart.GetText();
        sEnd = txtEnd.GetValue();
        callbackPartialView.PerformCallback();
    }

    function OnBeginCallback(s, e) {
        e.customArgs["ClassId"] = sClassId;
        e.customArgs["txtStart"] = sStart;
        e.customArgs["txtEnd"] = sEnd;
    }
</script>

@using (Html.BeginForm())
{
    @Html.DevExpress().TextBox(
    settings =>
    {
        settings.Properties.Native = true;
        settings.Name = "txtStart";
        settings.Width = Unit.Pixel(101);
        settings.Properties.NullText = IWSLocalResource.PeriodFrom;
    }
    ).GetHtml()

    @Html.DevExpress().TextBox(
    settings =>
    {
        settings.Name = "txtEnd";
        settings.Properties.Native = true;
        settings.Width = Unit.Pixel(101);
        settings.Properties.NullText = IWSLocalResource.PeriodTo;
    }
    ).GetHtml()

    @Html.DevExpress().ComboBox(settings =>
{
    settings.Name = "ClassId";
    settings.Width = Unit.Pixel(211);
    settings.Properties.IncrementalFilteringMode = IncrementalFilteringMode.StartsWith;
    settings.Properties.DropDownStyle = DropDownStyle.DropDown;
    settings.Properties.TextField = "ParentName";
    settings.Properties.ValueField = "ParentId";
    settings.SelectedIndex = 0;
    //settings.Properties.ClientSideEvents.BeginCallback = "function(s, e) { e.customArgs['classIdValue'] = classId.GetValue(); e.customArgs['classIdText'] = classId.GetText(); }";
}).BindList(ViewData["class"]).GetHtml()

    @Html.DevExpress().Button(
    settings =>
    {
        settings.Name = "btnSubmit";
        settings.ControlStyle.CssClass = "button";
        settings.Text = IWSLocalResource.Validate;
        settings.Width = Unit.Pixel(210);
        settings.UseSubmitBehavior = false;
        settings.ClientSideEvents.Click = "OnButtonClick";
    }
    ).GetHtml()
@Html.Partial("_CallbackPartialView")
}