
@using IWSProject.Content;
@Html.DevExpress().FileManager(settings =>
{
    settings.Name = "FileManager";

    settings.CallbackRouteValues = new { Controller = "Home", Action = "ImportCSVPartial" };

    settings.Settings.AllowedFileExtensions = new string[] { ".csv", ".txt" };
    settings.Settings.EnableMultiSelect = false;

    settings.SettingsEditing.AllowDelete = true;

    settings.SettingsUpload.Enabled = true;
    settings.SettingsEditing.AllowDownload = true;
    settings.SettingsUpload.UseAdvancedUploadMode = true;
    settings.SettingsUpload.AdvancedModeSettings.EnableMultiSelect = true;

    settings.ClientSideEvents.CustomCommand = "OnCustomCommand";
    settings.ClientSideEvents.ToolbarUpdating = "OnToolbarUpdating";

    settings.SettingsContextMenu.Items.Add(new FileManagerToolbarDeleteButton());
    settings.SettingsToolbar.Items.Add(new FileManagerToolbarDeleteButton());

    settings.SettingsContextMenu.Items.Add(new FileManagerToolbarRefreshButton());
    settings.SettingsToolbar.Items.Add(new FileManagerToolbarRefreshButton());

    var uploadToDBButton = new FileManagerToolbarCustomButton();
    uploadToDBButton.CommandName = "UploadToDB";
    uploadToDBButton.Text = IWSLocalResource.UploadToDB;
    uploadToDBButton.Image.IconID = IconID.ActionsImportimage16x16;
    uploadToDBButton.BeginGroup = true;
    settings.SettingsContextMenu.Items.Add(uploadToDBButton);
    uploadToDBButton = new FileManagerToolbarCustomButton();
    uploadToDBButton.CommandName = "UploadToDB";
    uploadToDBButton.Image.IconID = IconID.ActionsImportimage16x16;
    uploadToDBButton.BeginGroup = true;
    uploadToDBButton.ToolTip = IWSLocalResource.UploadToDB;

    settings.SettingsToolbar.Items.Add(uploadToDBButton);
    settings.SettingsContextMenu.Enabled = true;

    //settings.ClientSideEvents.ErrorOccurred = "function(s, e) { DXEventMonitor.Trace(s, e, 'ErrorOccurred') }";

    //settings.ClientSideEvents.SelectedFileOpened = "function(s, e) {window.location = '/pathtofile/' + e.file.GetFullName(); e.processOnServer = false; }";


    //if (Session["GenericError"] != null)
    //{
    //    settings.SettingsUpload.AdvancedModeSettings.DropZoneText = (string)ViewData["GenericError"];
    //}
}).BindToFolder(Model).GetHtml()